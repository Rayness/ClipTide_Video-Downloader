<!-- Copyright (C) 2025 Rayness -->
<!-- This program is free software under GPLv3. See LICENSE for details. -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link id="theme-link" rel="stylesheet" href="themes/cliptide/styles.css">
    <link rel="stylesheet" href="styles/base.css">
    <!-- <link rel="stylesheet" href="/data/fontawesome/css/all.min.css"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <title>ClipTide Video Downloader</title>
</head>
<body>
    <!-- RESIZE HANDLES (Невидимые границы для ресайза) -->
    <div class="resize-handle top" onmousedown="resizeWindow(event, 'top')"></div>
    <div class="resize-handle bottom" onmousedown="resizeWindow(event, 'bottom')"></div>
    <div class="resize-handle left" onmousedown="resizeWindow(event, 'left')"></div>
    <div class="resize-handle right" onmousedown="resizeWindow(event, 'right')"></div>
    
    <div class="resize-handle top-left" onmousedown="resizeWindow(event, 'top-left')"></div>
    <div class="resize-handle top-right" onmousedown="resizeWindow(event, 'top-right')"></div>
    <div class="resize-handle bottom-left" onmousedown="resizeWindow(event, 'bottom-left')"></div>
    <div class="resize-handle bottom-right" onmousedown="resizeWindow(event, 'bottom-right')"></div>
    <!-- ПРЕЛОАДЕР -->
    <div id="app-preloader">
        <div class="preloader-content">
            <img src="src/logo.png" alt="ClipTide" class="preloader-logo">
            <div class="preloader-spinner">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
            <h4 id="preloader-text">Загрузка...</h4>
        </div>
    </div>
    <div class="app">
        <!--  -->
        <div class="drag-area pywebview-drag-region">
            <div class="title">
                <img src="src/logo.png" alt="LOGO" id="logo">
                <h3>ClipTide</h3>
            </div>
            <div class="window-controls">
                <button class="win-btn minimize" onclick="pywebview.api.minimize()" title="Свернуть"></button>
                <button class="win-btn maximize" onclick="pywebview.api.toggle_fullscreen()" title="Развернуть"></button>
                <button class="win-btn close" onclick="pywebview.api.close()" title="Закрыть"></button>
            </div>
        </div>

        <!-- МОДАЛЬНОЕ ОКНО НАСТРОЕК -->
        <div id="settings-modal" class="settings-overlay">
            <div class="settings-container">
                
                <!-- Левая колонка -->
                <div class="settings-sidebar">
                    <div class="sett-header" id="settings-main-title">НАСТРОЙКИ</div> <!-- ID -->
                    
                    <div class="sett-nav">
                        <button class="sett-btn active" data-target="sect-app">
                            <i class="fa-solid fa-language"></i> <span id="nav-app">Приложение</span> <!-- ID -->
                        </button>
                        <button class="sett-btn" data-target="sect-download">
                            <i class="fa-solid fa-download"></i> <span id="nav-download">Загрузка</span> <!-- ID -->
                        </button>
                        <button class="sett-btn" data-target="sect-convert">
                            <i class="fa-solid fa-arrows-rotate"></i> <span id="nav-convert">Конвертация</span> <!-- ID -->
                        </button>
                        <button class="sett-btn" data-target="sect-proxy">
                            <i class="fa-solid fa-network-wired"></i> <span id="nav-proxy">Прокси</span> <!-- ID -->
                        </button>
                        
                        <div class="sett-separator"></div>
                        
                        <button class="sett-btn" data-target="sect-version">
                            <i class="fa-solid fa-code-branch"></i> <span id="nav-version">Версия</span> <!-- ID -->
                        </button>
                        <button class="sett-btn" data-target="sect-about">
                            <i class="fa-solid fa-circle-info"></i> <span id="nav-about">О программе</span> <!-- ID -->
                        </button>
                    </div>
                </div>

                <!-- Правая колонка -->
                <div class="settings-content-area">
                    <div class="settings-scroll-view">
                        
                        <!-- 1. App -->
                        <div id="sect-app" class="sett-section active">
                            <h2 id="hdr-appearance">Внешний вид и Язык</h2> <!-- ID -->
                            
                            <div class="sett-card">
                                <div class="sett-group">
                                    <label id="language_title">Язык</label>
                                    <select id="language" class="select-control js-custom-select">
                                        <option id="lang_ru" value="ru">Русский</option>
                                        <option id="lang_en" value="en">English</option>
                                        <option id="lang_de" value="de">Deutsch</option>
                                        <option id="lang_pl" value="pl">Polski</option>
                                        <option id="lang_uk" value="uk">Український</option>
                                        <option id="lang_fr" value="fr">Français</option>
                                        <option id="lang_it" value="it">Italiano</option>
                                        <option id="lang_cn" value="cn">中文</option>
                                        <option id="lang_ja" value="ja">日本語</option>
                                    </select>
                                    <button class="btn-text" id="open_locale_folder">Открыть папку локализации</button> <!-- ID corrected -->
                                </div>
                            </div>
                        
                            <div class="sett-card">
                                <div class="sett-group">
                                    <label id="theme-title">Тема</label>
                                    <div class="row-gap">
                                        <select class="theme-selector select-control js-custom-select" id="theme"></select>
                                        <button class="icon-btn small" id="btn-import-theme"><i class="fa-solid fa-file-import"></i></button>
                                        <button class="icon-btn small" id="open-theme_folder"><i class="fa-solid fa-folder-open"></i></button>
                                    </div>
                                </div>

                                <div class="sett-group">
                                    <label id="style-title">Стиль (Подтема)</label>
                                    <select class="theme-selector select-control js-custom-select" id="style"></select>
                                </div>
                            </div>
                        </div>

                        <!-- 2. Download -->
                        <div id="sect-download" class="sett-section">
                            <h2 id="hdr-download">Настройки загрузчика</h2> <!-- ID -->
                            
                            <div class="sett-card">
                                <h4 id="hdr-folders">Папки</h4> <!-- ID -->
                                <div class="sett-group">
                                    <label id="download_folder_title">Папка для видео</label>
                                    <div class="row-gap">
                                        <input class="input-folder" disabled type="text" id="folder_path">
                                        <button class="icon-btn small" id="chooseButton"><i class="fa-solid fa-folder"></i></button>
                                        <button class="icon-btn small" id="openFolder"><i class="fa-solid fa-folder-open"></i></button>
                                    </div>
                                </div>
                                <div class="row-switch">
                                    <label class="switch"><input type="checkbox" id="switch_openDownloadFolder"><span class="slider"></span></label>
                                    <span id="open_folder_download">Открывать папку после завершения</span>
                                </div>
                                <div class="row-switch">
                                    <label class="switch"><input type="checkbox" id="switch_notifiDownload"><span class="slider"></span></label>
                                    <span id="get_notifi_download">Уведомления о завершении</span>
                                </div>
                            </div>

                            <div class="sett-card">
                                <h4 id="subs-title">Субтитры</h4>
                                <div class="row-switch">
                                    <label class="switch"><input type="checkbox" id="switch_subs_enable"><span class="slider"></span></label>
                                    <span id="lbl_subs_enable">Скачивать субтитры</span>
                                </div>
                                <div class="row-switch">
                                    <label class="switch"><input type="checkbox" id="switch_subs_auto"><span class="slider"></span></label>
                                    <span id="lbl_subs_auto">Авто-генерация</span>
                                </div>
                                <div class="row-switch">
                                    <label class="switch"><input type="checkbox" id="switch_subs_embed"><span class="slider"></span></label>
                                    <span id="lbl_subs_embed">Встраивать в файл</span>
                                </div>
                                <div class="sett-group">
                                    <label id="lbl_subs_lang">Язык субтитров</label>
                                    <select id="subs_language" class="select-control js-custom-select">
                                        <option value="all">Все доступные</option>
                                        <option value="en">English</option>
                                        <option value="ru">Russian</option>
                                    </select>
                                </div>
                            </div>

                            <div class="sett-card">
                                <h4 id="audio-title">Аудиодорожки</h4>
                                <div class="sett-group">
                                    <label id="lbl_audio_lang">Предпочитаемый язык</label>
                                    <select id="audio_language" class="select-control js-custom-select">
                                        <option value="none">Авто</option>
                                        <option value="all_tracks">Все дорожки (MKV)</option>
                                        <option value="en">English</option>
                                        <option value="ru">Russian</option>
                                        <option value="orig">Original</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- 3. Convert -->
                        <div id="sect-convert" class="sett-section">
                            <h2 id="hdr-convert">Настройки конвертера</h2> <!-- ID -->
                            
                            <div class="sett-card">
                                <div class="sett-group">
                                    <label id="conversion_folder_title">Папка для сохранения</label>
                                    <div class="row-gap">
                                        <input class="input-folder" disabled type="text" id="conv_folder_path">
                                        <button class="icon-btn small" id="chooseButton-conv"><i class="fa-solid fa-folder"></i></button>
                                        <button class="icon-btn small" id="openFolder-conv"><i class="fa-solid fa-folder-open"></i></button>
                                    </div>
                                </div>
                                
                                <div class="row-switch">
                                    <label class="switch"><input type="checkbox" id="switch_openConverterFolder"><span class="slider"></span></label>
                                    <span id="open_converter_folder">Открывать папку после завершения</span>
                                </div>
                                <div class="row-switch">
                                    <label class="switch"><input type="checkbox" id="switch_notifiConvertion"><span class="slider"></span></label>
                                    <span id="get_notifi_conversion">Уведомления</span>
                                </div>
                            </div>
                        </div>

                        <!-- 4. Proxy -->
                        <div id="sect-proxy" class="sett-section">
                            <h2 id="proxy-title">Прокси-сервер</h2>
                            
                            <div class="sett-card">
                                <div class="row-switch" style="margin-bottom: 1rem;">
                                    <label class="switch"><input type="checkbox" id="switch_proxy"><span class="slider"></span></label>
                                    <span id="turn_on_proxy">Включить прокси</span>
                                </div>

                                <label id="lbl-proxy-string">Строка подключения</label> <!-- ID -->
                                <div class="row-gap">
                                    <input class="input-folder" type="text" id="input_proxy" placeholder="protocol://user:pass@ip:port">
                                </div>
                                <div class="row-gap" style="margin-top: 10px;">
                                    <button class="primary-btn" id="proxy_check">
                                        <i class="fa-solid fa-bolt"></i> <span id="txt-proxy-check">Проверить</span> <!-- ID -->
                                    </button>
                                    <button class="primary-btn" id="proxy_apply">
                                        <i class="fa-solid fa-check"></i> <span id="txt-proxy-save">Сохранить</span> <!-- ID -->
                                    </button>
                                </div>
                                <div id="proxy-status-text" style="margin-top: 10px; font-size: 0.9rem;"></div>
                            </div>
                        </div>

                        <!-- 5. Version -->
                        <div id="sect-version" class="sett-section">
                            <h2 id="updates-title">Обновление</h2>
                            
                            <div class="sett-card center-card">
                                <img src="src/logo.png" style="width: 80px; margin-bottom: 1rem; border-radius: 0.5rem;">
                                <h3 id="current-version">v1.6.2</h3>
                                
                                <!-- Выбор канала -->
                                <div style="margin-bottom: 1rem; display: flex; align-items: center; gap: 10px;">
                                    <label style="color: #888;">Канал обновлений:</label>
                                    <select id="update_channel" class="select-control js-custom-select" style="width: 120px;">
                                        <option value="stable">Stable</option>
                                        <option value="dev">Dev / Beta</option>
                                    </select>
                                </div>

                                <p id="update__text" style="color: #aaa; margin-bottom: 1rem;">Проверка...</p>
                                
                                <button class="primary-btn" id="update" style="width: 200px;">
                                    <i class="fa-solid fa-rotate"></i> <span id="txt-btn-update">Проверить обновления</span>
                                </button>
                            </div>
                        </div>

                        <!-- 6. About -->
                        <div id="sect-about" class="sett-section">
                            <h2 id="about-title">О приложении</h2>
                            
                            <div class="sett-card">
                                <p><strong id="txt-app-name">ClipTide</strong> — <span id="desc-about">Универсальный инструмент.</span></p> <!-- ID -->
                                <p style="color: #888; font-size: 0.9rem;"><span id="about-date">Дата релиза:</span> <span id="about-date-val">2025</span></p>
                                
                                <div class="social-links">
                                    <a href="https://github.com/Rayness/YT-Downloader" target="_blank" class="social-btn github"><i class="fa-brands fa-github"></i> GitHub</a>
                                    <a href="#" target="_blank" class="social-btn youtube"><i class="fa-brands fa-youtube"></i> YouTube</a>
                                    <a href="#" target="_blank" class="social-btn telegram"><i class="fa-brands fa-telegram"></i> Telegram</a>
                                    <a href="#" target="_blank" class="social-btn web"><i class="fa-solid fa-globe"></i> Website</a>
                                </div>
                                
                                <div style="margin-top: 2rem; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 1rem;">
                                    <h5 id="hdr-licenses">Лицензии</h5> <!-- ID -->
                                    <p style="font-size: 0.8rem; color: #666;" id="txt-licenses">
                                        Используемые библиотеки: yt-dlp, ffmpeg, pillow, pywebview.<br>
                                        Лицензия: GPLv3
                                    </p> <!-- ID -->
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- Кнопка Закрыть -->
                <div class="settings-close-col">
                    <button class="btn-close-settings" id="btn-close-settings">
                        <i class="fa-solid fa-xmark"></i>
                        <span id="btn-close">ESC</span> <!-- ID -->
                    </button>
                </div>
            </div>
        </div>

        <div class="modal" id="modal-playlist">
            <div class="modal-content info-card playlist-card">
                <div class="modal-header">
                    <div style="display: flex; flex-direction: column;">
                        <h3 id="pl-title">Плейлист</h3>
                        <span id="pl-count" style="font-size: 0.8rem; color: #888;">0 видео</span>
                    </div>
                    <span class="modal-close" id="close-playlist">&times;</span>
                </div>
                
                <!-- Панель управления выбором -->
                <div class="playlist-controls">
                    <label class="checkbox-container">
                        <input type="checkbox" id="pl-select-all" checked>
                        <span class="checkmark"></span>
                        <span style="margin-left: 8px;">Выбрать все</span>
                    </label>
                </div>

                <!-- Список видео -->
                <div class="playlist-list modal-body-text" id="playlist-items">
                    <!-- Сюда JS нагенерит строки -->
                </div>

                <div class="modal-footer">
                    <button class="btn" id="btn-pl-cancel">Отмена</button>
                    <button class="primary-btn" id="btn-pl-add">Добавить в очередь</button>
                </div>
            </div>
        </div>

        <!-- Основное информационное модальное окно (Help) -->
        <div class="modal" id="modal-info">
            <div class="modal-content info-card">
                <div class="modal-header">
                    <h3 id="info-modal-title">Заголовок</h3>
                    <span class="modal-close" id="close-info-modal">&times;</span>
                </div>
                
                <div class="modal-body-text" id="info-modal-content">
                    <!-- Сюда будет вставляться HTML текст из JSON -->
                </div>

                <div class="modal-footer">
                    <button class="primary-btn" id="btn-info-close">Понятно</button>
                </div>
            </div>
        </div>

        <!-- Модальное окно истории (Детали уведомления) -->
        <div class="modal" id="modal-history">
            <div class="modal-content info-card history-card">
                <div class="modal-header">
                    <h3 id="hist-title">Название видео</h3>
                    <span class="modal-close" id="close-history">&times;</span>
                </div>
                
                <div class="hist-body modal-body-text">
                    <img id="hist-img" src="" alt="Preview">
                    <div class="hist-info">
                        <div class="hist-row">
                            <span id="lbl-hist-date">Дата загрузки:</span>
                            <span id="hist-date" class="hist-val">--.--.----</span>
                        </div>
                        <div class="hist-row">
                            <span id="lbl-hist-fmt">Формат:</span>
                            <span id="hist-fmt" class="hist-val">MP4</span>
                        </div>
                        <div class="hist-row">
                            <span id="lbl-hist-link">Ссылка:</span>
                            <a id="hist-link" href="#" target="_blank" class="hist-val link">Открыть в браузере</a>
                        </div>
                    </div>
                </div>

                <div class="hist-actions">
                    <button class="primary-btn" style="background-color: var(--input-bg);" id="btn-redownload">
                        <i class="fa-solid fa-download"></i> <span id="txt-hist-dl">Скачать снова</span>
                    </button>
                    <button class="icon-btn small" id="btn-hist-folder" title="Открыть папку">
                        <i class="fa-solid fa-folder-open"></i>
                    </button>
                    <button class="primary-btn" style="background-color: var(--danger-color);" id="btn-hist-delete">
                        <i class="fa-solid fa-trash"></i> <span id="txt-hist-del">Удалить запись</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Основное приложение -->
        <div class="body-app">
            <div class="left-panel">
                <div class="utils">
                    <!-- Загрузчик -->
                    <div class="tab-btn" data-tab="1" id="video-downloader" title="Загрузчик">
                        <i class="fa-solid fa-download"></i>
                    </div>
                    <!-- Конвертер -->
                    <div class="tab-btn" data-tab="2" id="converter" title="Конвертер">
                        <i class="fa-solid fa-arrow-right-arrow-left"></i>
                    </div>
                    <!-- Магазин (бывший coming-soon) -->
                    <div class="tab-btn" data-tab="3" id="coming-soon" title="Магазин">
                        <i class="fa-solid fa-shapes"></i> <!-- Или fa-store -->
                    </div>
                </div>
                
                <div class="settings">
                    <!-- Донат -->
                    <div class="tab-btn" data-tab="6" id="donate" title="Поддержать">
                        <i class="fa-solid fa-heart"></i>
                    </div>
                    <!-- Настройки (открывает модалку) -->
                    <div class="side-btn-settings" id="btn-open-settings" title="Настройки">
                        <i class="fa-solid fa-gear"></i>
                    </div>
                </div>
            </div>
            <div class="conteiner">
                <div class="main">
                    <div class="name">
                        <h3 id="name">Video Downloader</h3>
                        
                        <div class="utils">
                            <div class="top-bar-btn" id="notifications-btn" title="История уведомлений">
                                <i class="fa-solid fa-bell"></i>
                                <!-- Опционально: красная точка для новых уведомлений -->
                                <!-- <span class="notifi-dot"></span> -->
                            </div>
                        </div>
                    </div>
                    <!-- Загрузчик видео -->
                    <div class="content active" id="1" data-status="Video Downloader">
                        <div class="download-settings fade-in">
                            <input class="url-input fade-in" type="text" id="videoUrl" placeholder="Введите URL видео">
                            <div class="settings-group">
                                <select id="format" class="select-control js-custom-select">
                                    <option value="mp4">MP4</option>
                                    <option value="mkv">MKV</option>
                                    <option value="webm">WEBM</option>
                                    <option value="avi">AVI</option>
                                    <option disabled>------------</option>
                                    <option value="mp3">MP3 (Только аудио)</option>
                                    <!-- <option disabled>-------------------------------------------</option>
                                    <option disabled value="m4a">M4A (Только аудио)</option>
                                    <option disabled value="opus">OPUS (Только аудио)</option>
                                    <option disabled value="aac">AAC (Только аудио)</option>
                                    <option disabled value="flac">FLAC (Только аудио)</option> -->
                                </select>
                                <select id="resolution" class="select-control js-custom-select">
                                    <option value="240">SD (240p)</option>
                                    <option value="360">SD (360p)</option>
                                    <option value="480">SD (480p)</option>
                                    <option value="720">HD (720p)</option>
                                    <option selected value="1080">FullHD (1080p)</option>
                                    <option value="1440">2K (1440p)</option>
                                    <option value="2160">4K (2160p)</option>
                                    <!-- <option value="4320">8K (4320p)</option> -->
                                </select>
                                <div class="action-buttons flex-conteiner-row" style="gap: 0.5rem;">
                                    <button class="primary-btn fade-in" id="addBtn"><i class="fa-solid fa-plus"></i></button>
                                    <button class="primary-btn fade-in" id="startBtn"><i class="fa-solid fa-play"></i></button>
                                    <!-- <button><i class="fa-solid fa-pause"></i></button> -->
                                    <button class="primary-btn fade-in" id="stopBtn"><i class="fa-solid fa-stop"></i></button>
                                    <!-- <button class="primary-btn fade-in" id="startBtn">Начать загрузку</button> -->
                                    <!-- <button class="primary-btn fade-in" disabled id="stopBtn">STOP</button> -->
                                </div>
                            </div>
                        </div>
                        <div id="queue-list" class="queue-container fade-in">
                            <ul id="queue" class="queue-items"></ul>
                        </div>
                    </div>
        
                    <div class="content" id="11" data-status="Profile">
                        <div class="coming-soon">
                            <i class="fa-solid fa-screwdriver-wrench"></i>
                            <h1 class="coming-soon_text">Coming Soon</h1>
                        </div>
                    </div>
        
                    <div class="content" id="12" data-status="History">
                        <!-- <div class="coming-soon">
                            <i class="fa-solid fa-screwdriver-wrench"></i>
                            <h1>Coming Soon</h1>
                        </div> -->
                        <div class="notification-container" id="notification-container">
                            <!--
                            <div class="block">
                                <div class="icon">
                                    <i class="fa-solid fa-code-compare"></i>
                                </div>
                                <div class="body">
                                    <h4>ClipTide</h4>
                                    <p>Доступна новая версия - 1.4.1</p>
                                    <div class="datetime">
                                        <p>10.05.2025</p>
                                        <p>-</p>
                                        <p>11:30</p>
                                    </div>
                                </div>
                                <div class="remove">
                                    <button>
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                            <path
                                            d="M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"
                                            />
                                        </svg>
                                    </button>
                                </div>
                            </div> -->
                        </div>
                    </div>
        
                    <div class="content" id="3" data-status="Store">
                        <div class="store-container">
                            <!-- Верхняя панель: Табы и кнопка Обновить -->
                            <div class="store-header-row" style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 0.5rem; margin-bottom: 1rem;">
                                <div class="store-tabs">
                                    <!-- data-target указывает на ID блока, который нужно показать -->
                                    <button class="store-tab active" id="tab-store-modules" data-target="store-modules">Модули</button>
                                    <button class="store-tab" id="tab-store-themes" data-target="store-themes">Темы</button>
                                </div>
                                <button class="icon-btn small" id="btn-refresh-store" title="Обновить список">
                                    <i class="fa-solid fa-rotate-right"></i>
                                </button>
                            </div>

                            <!-- СЕКЦИЯ 1: МОДУЛИ (Активна по умолчанию) -->
                            <div class="store-section active" id="store-modules">
                                <div class="store-grid" id="modules-list">
                                    <div style="grid-column: 1/-1; text-align: center; color: #666; margin-top: 2rem;">
                                        <i class="fa-solid fa-spinner fa-spin"></i> Загрузка модулей...
                                    </div>
                                </div>
                            </div>

                            <!-- СЕКЦИЯ 2: ТЕМЫ (Скрыта по умолчанию) -->
                            <div class="store-section" id="store-themes">
                                <div class="store-grid" id="themes-list">
                                    <div style="grid-column: 1/-1; text-align: center; color: #666; margin-top: 2rem;">
                                        Нажмите "Обновить" для загрузки тем
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="content" id="2" data-status="Converter">
                        <div class="converter-layout">
                            <!-- Левая часть: Список файлов и DropZone -->
                            <div class="converter-main">
                                <div class="drop-zone-small" id="dropZoneConv">
                                    <i class="fa-solid fa-plus"></i>
                                    <span id="txt-conv-add">Добавить файлы</span> <!-- ID -->
                                </div>
                                
                                <ul id="converter-queue" class="converter-list">
                                    <!-- Сюда будут добавляться файлы -->
                                </ul>
                            </div>

                            <!-- Правая часть: Настройки -->
                            <div class="converter-sidebar">
                                <!-- Заголовок, который будет меняться -->
                                <div class="sidebar-header">
                                    <h4 id="setting-header-title">Глобальные настройки</h4>
                                    <button class="icon-btn small" id="btn-apply-all" title="Применить ко всем" style="display: none;">
                                        <i class="fa-solid fa-copy"></i>
                                    </button>
                                </div>
                                <div id="settings-video">  
                                    <div class="setting-item">
                                        <label id="lbl-cv-fmt">Формат:</label>
                                        <select id="cv-format" class="select-control js-custom-select">
                                            <option value="mp4">MP4 (Video)</option>
                                            <option value="avi">AVI (Video)</option>
                                            <option value="mkv">MKV (Video)</option>
                                            <option value="mov">MOV (Video)</option>
                                            <option disabled>──────────</option>
                                            <option value="mp3">MP3 (Audio)</option>
                                            <option value="aac">AAC (Audio)</option>
                                            <option value="wav">WAV (Audio)</option>
                                        </select>
                                    </div>

                                    <div class="setting-item">
                                        <label id="lbl-cv-codec">Кодек:</label>
                                        <select id="cv-codec" class="select-control js-custom-select">
                                            <option value="libx264">H.264 (Стандарт)</option>
                                            <option value="libx265">H.265 (HEVC)</option>
                                            <option value="copy">Без перекодирования (Copy)</option>
                                        </select>
                                    </div>

                                    <div class="setting-item">
                                        <label id="lbl-cv-qual">Качество (CRF):</label>
                                        <input type="range" id="cv-quality" min="18" max="35" value="23" step="1">
                                        <div class="range-value">
                                            <span id="txt-cv-better">Лучше</span>
                                            <span id="cv-quality-val">23</span>
                                            <span id="txt-cv-worse">Хуже</span>
                                        </div>
                                    </div>

                                    <div class="setting-item">
                                        <label id="lbl-cv-res">Разрешение:</label> 
                                        <select id="cv-res" class="select-control js-custom-select">
                                            <option value="original" id="cv-res-orig">Оригинал</option>
                                            <!-- <option value="8K">4320p</option> -->
                                            <option value="4K">2160p</option>
                                            <option value="2K">1440p</option>
                                            <option value="1080">1080p</option>
                                            <option value="720">720p</option>
                                            <option value="480">480p</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- === НАСТРОЙКИ ИЗОБРАЖЕНИЙ (Новые) === -->
                                <div id="settings-image" style="display: none;">
                                    <div class="setting-item">
                                        <label id="lbl-cv-img-fmt">Формат:</label>
                                        <select id="cv-img-format" class="select-control js-custom-select">
                                            <option value="jpg">JPG (JPEG)</option>
                                            <option value="png">PNG</option>
                                            <option value="webp">WEBP</option>
                                            <option value="bmp">BMP</option>
                                            <option value="ico">ICO</option>
                                            <option value="pdf">PDF</option>
                                        </select>
                                    </div>

                                    <div class="setting-item">
                                        <label id="lbl-cv-img-qual">Качество:</label>
                                        <input type="range" id="cv-img-quality" min="10" max="100" value="90" step="5">
                                        <div class="range-value">
                                            <span id="txt-cv-img-low">Низкое</span>
                                            <span id="cv-img-quality-val">90%</span>
                                            <span id="txt-cv-img-high">Выс.</span>
                                        </div>
                                    </div>
                                    
                                    <div class="setting-item">
                                        <label id="lbl-cv-img-size">Размер:</label>
                                        <select id="cv-img-resize" class="select-control js-custom-select">
                                            <option value="original" id="opt-cv-img-orig">Оригинал</option>
                                            <option value="50%">50%</option>
                                            <option value="25%">25%</option>
                                            <option value="1920">Max 1920px</option>
                                            <option value="1080">Max 1080px</option>
                                        </select>
                                    </div>
                                </div>

                                <div id="settings-document" style="display: none;">
                                    <div class="setting-item">
                                        <label>Формат:</label>
                                        <select id="cv-doc-format" class="select-control js-custom-select">
                                            <option value="pdf">PDF (Portable Document)</option>
                                            <option value="html">HTML (Web Page)</option>
                                            <option value="txt">TXT (Plain Text)</option>
                                            <option value="docx">DOCX (Word 2007+)</option>
                                            <option value="odt">ODT (OpenDocument)</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Можно добавить доп. опции в будущем -->
                                    <div class="setting-item" style="margin-top: 10px;">
                                        <p style="font-size: 0.75rem; color: #777;">
                                            Конвертация выполняется через внешний модуль.
                                        </p>
                                    </div>
                                </div>

                                <div class="converter-actions">
                                    <button class="primary-btn" id="btn-convert-start">
                                        <i class="fa-solid fa-rotate"></i> <span id="txt-btn-conv">Конвертировать</span>
                                    </button>
                                    <button class="primary-btn" id="btn-convert-stop" disabled>
                                        <i class="fa-solid fa-stop"></i> <span id="txt-btn-stop">Стоп</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="content donate" id="6" data-status="Donate">
                        <div class="sections">
                            <div class="section">
                                <p id="donate-description">Если есть желание помочь финансово и ускорить дальнейшую разработку приложения!</p>
                            </div>
                            <div class="section">
                                <div>
                                    <a href="https://boosty.to/rayness/donate" target="_blank">
                                        Boosty
                                    </a>
                                    <img src="./src/donate-boosty.png" alt="Boosty">
                                </div>
                                <div>
                                    <a href="https://www.tbank.ru/cf/4vbUQHX5qLB" target="_blank">
                                        T-Банк
                                    </a>
                                    <img src="./src/donate-tbank.jpg" alt="Boosty">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="down-panel collapsed" id="log-panel">
                    <!-- 1. Этот блок ВСЕГДА сверху (Ручка) -->
                    <div class="panel-handle" id="toggle-logs-btn">
                        <div class="handle-left">
                            <i class="fa-solid fa-terminal"></i>
                            <span>Лог событий</span>
                        </div>
                        <div class="handle-right">
                            <i class="fa-solid fa-chevron-up" id="log-arrow"></i>
                        </div>
                    </div>
                    
                    <!-- 2. Этот блок занимает всё оставшееся место -->
                    <div class="panel-content">
                        <!-- 3. И ТОЛЬКО ЭТОТ блок скроллится -->
                        <div id="app-logs" class="logs-container">
                            <!-- Сюда JS добавляет записи -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="scripts/proxy.js" defer></script>
    <!-- ---------------------------- -->
    <script src="scripts/core.js" defer></script>
    <script src="scripts/downloader.js" defer></script>
    <script src="scripts/converter.js" defer></script>
    <script src="scripts/settings.js" defer></script>
    <script src="scripts/store.js" defer></script>
    <!-- ---------------------------- -->
    <script src="scripts/modal.js"></script>
    <script src="scripts/theme.js" defer></script>
    <script src="scripts/notification.js"></script>
    <script src="scripts/ui-effects.js"></script>
    <script src="scripts/locale.js"></script>
    <script src="scripts/version.js"></script>
    <script src="scripts/utils.js"></script>
</body>
</html>